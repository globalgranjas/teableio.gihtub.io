# 汇总

## 简介

在 Teable 中，汇总字段允许你对关联表中的数据进行聚合计算，例如求和、平均、计数等。这个功能非常适合需要汇总相关数据以进行分析和报告的场景。

## 汇总字段与关联字段的关系

汇总字段依赖于先前创建的关联字段。通过关联字段，汇总字段可以“查看”到另一个表中的相关记录，并对其执行各种计算操作。

## 汇总后数据格式化
在 Teable 中进行汇总后，您不仅仅可以得到计算结果，还可以对这些结果进行格式化操作，以使它们更易于阅读和理解。格式化允许你按照特定的样式和格式来展示汇总后的数据。这不仅使数据更具可读性，还可以帮助你确保数据在不同的上下文和应用场景中保持一致性。

## 如何创建汇总字段？

1. 在拥有关联字段的表中，选择“添加字段”，然后选择“汇总字段”。
2. 选择一个已经建立的关联字段来确定汇总的数据来源。
3. 选择你想要汇总的字段，然后指定要进行的聚合操作，文章下方有完整的操作列表。

## 汇总字段的应用场景和示例

假设你管理一个书店的数据库，包含以下两个表：

**表 A**：订单

**表 B**：书籍

订单表记录顾客的购买信息，而书籍表包含了各本书的定价。

如果你想要汇总每个订单的总金额，你可以：

1. 在“订单”表中创建一个关联字段关联到“书籍”表。
2. 然后，在“订单”表中创建一个汇总字段，选择上一步创建的关联字段。
3. 指定汇总操作为“SUM”并选择“书籍”表中的价格字段作为汇总的对象。

假设我们有两个表格，一个是“书籍详情”表格，另一个是“订单”表格。

### 书籍详情表

| 书籍名称 | 价格 |
|---------|-----|
| 《代码大全》  | $60 |
| 《设计模式》  | $40 |
| 《重构》     | $50 |

在这个表中，我们列出了每本书的价格。

### 订单表

| 订单号 | 书籍（关联字段）          | 总金额（汇总字段） |
|-------|------------------------|-------------------|
| 001   | 《代码大全》，《设计模式》 | $100             |
| 002   | 《重构》，《设计模式》    | $90              |

在订单表中，当我们选择了某些书籍，汇总字段会自动计算所选书籍的总价格：

- 对于订单001，我们选择了《代码大全》和《设计模式》这两本书，它们的价格分别是$60和$40，所以总金额汇总字段会显示$100。

- 对于订单002，我们选择了《重构》和《设计模式》这两本书，它们的价格分别是$50和$40，所以总金额汇总字段会显示$90。

这样，通过关联字段和汇总字段的结合，我们可以轻松地在订单表中自动计算每个订单的总金额，而不必手动输入或计算。

## 支持的汇总公式

| 公式名          | 解释                                                         |
|----------------|--------------------------------------------------------------|
| COUNTALL       | 计算所有的值，包括非空和空值                                   |
| COUNTA         | 计算非空的值                                                 |
| COUNT          | 计算记录的数量                                               |
| SUM            | 计算所有数值的总和                                            |
| MAX            | 返回所有数值中的最大值                                        |
| MIN            | 返回所有数值中的最小值                                        |
| AND            | 如果所有值都为真，则返回真                                    |
| OR             | 如果任何值为真，则返回真                                      |
| XOR            | 如果奇数个值为真，则返回真                                    |
| ARRAY_JOIN     | 将数组中的所有值连接成一个字符串                              |
| ARRAY_UNIQUE   | 从数组中删除重复的值，并返回一个仅包含唯一值的新数组           |
| ARRAY_COMPACT  | 从数组中删除所有空值，并返回一个新数组                        |
| CONCATENATE    | 将多个值连接成一个字符串                                     |


## 注意事项

- **性能考虑**：大量的汇总操作可能会影响性能，特别是当涉及到的数据记录非常多时。系统会尽可能的提供最快的计算速度，不过适时地优化和审查你的汇总设置能够更加保证应用的写入性能。
- **汇总公式**：汇总字段会自动根据你所选的汇总字段数据类型来提供允许的汇总公式，所以你不会总是看到所有的汇总公式。


## 结语

汇总字段（Rollup）是 Teable 强大的数据分析工具之一，它通过自动化计算减轻了手动汇总和更新数据的负担。它提供了一种快速、灵活的方法来查看和分析关联数据的聚合信息。
